<!DOCTYPE html><html lang="en" itemscope itemtype="https://schema.org/Blog"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"><meta name="viewport" content="width=device-width, initial-scale=1"><title>Short tip: viewing and resolving svn conflicts in the terminal</title><meta name="keywords" content="svn, workflow, automation, subversion, sublimetext, st3, terminal, iterm2"><meta name="author" itemprop="creator" content="Adrian Oprea"><meta name="description" itemprop="description" content="Working with SVN for the past couple of years has taught me a lot in terms of how I don’t want a version control system to be. Unfortunately, many of the customers and companies I’ve worked with/for have had their entire codebase on SVN, and very often I’ve found myself in the situation where, after a simple merge, I’d get tons of conflicts, either related to whitespace, or a specific piece of code that changes between releases (app version, for example). "><meta property="og:type" content="article" /><meta property="og:title" content="Short tip: viewing and resolving svn conflicts in the terminal" /><meta property="og:description" content="Working with SVN for the past couple of years has taught me a lot in terms of how I don’t want a version control system to be. Unfortunately, many of the customers and companies I’ve worked with/for have had their entire codebase on SVN, and very often I’ve found myself in the situation where, after a simple merge, I’d get tons of conflicts, either related to whitespace, or a specific piece of code that changes between releases (app version, for example). " /><meta property="og:image" content="https://codesi.nz/images/posts/short_tip_svn_conflicts/owl.jpg" /><meta property="og:url" content="https://codesi.nz/short-tip-viewing-and-resolving-svn-conflicts-in-the-terminal/" /><meta property="og:locale" content="en_US" /><meta property="article:published_time" content="2015-06-15T12:00:00+03:00" /><meta property="article:modified_time" content="2015-06-15T12:00:00+03:00 " /><link rel="canonical" href="https://codesi.nz/short-tip-viewing-and-resolving-svn-conflicts-in-the-terminal/"><meta name="”twitter:creator”" value=""><meta name="twitter:card" content="summary_large_image"><meta name="twitter:url" content="https://codesi.nz/short-tip-viewing-and-resolving-svn-conflicts-in-the-terminal/"><meta name="twitter:title" content="Short tip: viewing and resolving svn conflicts in the terminal"><meta name="twitter:description" content="Working with SVN for the past couple of years has taught me a lot in terms of how I don’t want a version control system to be. Unfortunately, many of the customers and companies I’ve worked with/for have had their entire codebase on SVN, and very often I’ve found myself in the situation where, after a simple merge, I’d get tons of conflicts, either related to whitespace, or a specific piece of code that changes between releases (app version, for example). "><meta name="twitter:image" content="https://codesi.nz/images/posts/short_tip_svn_conflicts/owl.jpg"><link type="application/atom+xml" rel="alternate" href="/feed.xml" title="codesins. - The blog of Adrian Oprea, freelance web developer."><link rel="author" href="https://plus.google.com/+AdrianOpreasWeb/"><link rel="publisher" href="https://plus.google.com/+AdrianOpreasWeb/"><link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/normalize/4.0.0/normalize.min.css"><link href='https://fonts.googleapis.com/css?family=Open+Sans:400,300,300italic,700,400italic,600,600italic,700italic,800,800italic' rel='stylesheet' type='text/css'><link href='https://fonts.googleapis.com/css?family=Lato:100,300,900' rel='stylesheet' type='text/css'><link rel="stylesheet" href="/stylesheets/screen.css"><link rel="stylesheet" href="/stylesheets/prism.css"> <script> var host = "codesi.nz"; if ((host == window.location.host) && (window.location.protocol != "https:")) { window.location.protocol = "https"; } </script><body><div class="header"><div role="branding" class="branding"><h1><a href="/" title="Go back to the homepage">codesins.</a></h1></div><div class="navigation"><nav role="navigation"><ul><li class="active" ><a title="Navigate to the blog" href="/">Blog</a><li ><a title="Find out more about me" href="/about/">Who am I</a><li ><a title="Go to the contact page" href="/contact/">Let's chat</a></ul></nav></div></div><article class="article-full" itemprop="blogPosts" itemscope itemtype="https://schema.org/BlogPosting"><meta itemprop="datePublished" content="2015-06-15T12:00:00+03:00"><meta itemprop="dateModified" content="2015-06-15T12:00:00+03:00"><meta itemprop="keywords" content="svn, workflow, automation, subversion, sublimetext, st3, terminal, iterm2"><meta itemprop="author" content="Adrian Oprea"><meta itemprop="inLanguage" content="en_US"> <span itemprop="audience" itemscope itemtype="http://schema.org/PeopleAudience"><meta itemprop="gender" content="any"> </span><header class="article-header"><h1 class="article-header__heading article-header__heading--center article-header__heading--white" itemprop="headline">Short tip: viewing and resolving svn conflicts in the terminal</h1><div class="article-info article-info--delimited"><div class="article-info-inner"> <a class="article-info__author-profile" href="/about" title="About the author: Adrian Oprea"> <img class="article-info__author-image" src="/images/assets/adrian_oprea.png" alt="Author image: Adrian Oprea"> </a><p> Adrian Oprea on <time itemProp="datePublished" datetime="2015-06-15T12:00:00+03:00">15 Jun 2015</time><br> Published in <span class="categories-list"> <span class="categories-list-item">workflow</span> </span></div></div></header><main class="article-body" itemprop="articleBody"><p>Working with SVN for the past couple of years has taught me a lot in terms of how I don’t want a version control system to be. Unfortunately, many of the customers and companies I’ve worked with/for have had their entire codebase on SVN, and very often I’ve found myself in the situation where, after a simple merge, I’d get tons of conflicts, either related to whitespace, or a specific piece of code that changes between releases (app version, for example).<p>Now, to clarify: I’m not an IDE guy, and even though I’ve used many IDEs and I still use them today, if I can do my job in Vim, Sublime Text or even Chrome Dev Tools, then I’m good with that. I’m also a big fan of the command line, so when it comes to SVN conflicts, my workflow is as follows:<p>If I have conflicts, I first list only the conflicted files, so I can have a clear view of the size of the problem. For this, I rely on the fact that SVN adds the state that the file is in, as the first letter on each row, when issuing the <code class="highlighter-rouge">svn status</code> command.<p><code class="highlighter-rouge">&gt; svn status | grep "^C"</code><p>The above command pipes <code class="highlighter-rouge">svn status</code> through <code class="highlighter-rouge">grep</code> and applies a RegExp which basically says: “Give me all the rows in <code class="highlighter-rouge">svn status</code>’s output that begin with a capital C”. The output will look the same as below.<figure class="highlight"><pre><code class="language-bash" data-lang="bash">adrian at mothership <span class="k">in</span> ~/Documents/projects/svn-project
<span class="gp">&gt; </span>svn st | grep <span class="s2">"^C"</span>
C       modules/user/index.js
C       modules/user/meta_inf.json
C       modules/database/index.js
C       modules/database/drivers/cassandra.js
C       modules/database/drivers/redis.js
C       package.json</code></pre></figure><p>I then open all conflicted files in an editor, in this case Sublime Text 3 with the following command:<p><code class="highlighter-rouge">&gt; subl $(svn status | grep "^C" | awk '{print $2}'</code><p>I’ll break the command into subcommands so I can explain what each subcommand does. I’ll asume we already know the grepping part, so I’ll explain only the <code class="highlighter-rouge">awk</code> part.<p><code class="highlighter-rouge">&gt; svn status | grep "^C" | awk '{print $2'}</code> means: “Take the output of <code class="highlighter-rouge">svn status</code> and pipe it through <a href="https://en.wikipedia.org/wiki/AWK">awk’s</a> <code class="highlighter-rouge">print</code> statement”.<p>Given the fact that we have 2 columns in our initial <code class="highlighter-rouge">svn status</code> output — the Cs column and the filename column — we can rely on awk to print the filename for us for each row in the output it receives. If you would issue the subcommand above in your terminal you’d get the list of conflicted files, without the leading capital “C”.<figure class="highlight"><pre><code class="language-bash" data-lang="bash">modules/user/index.js
modules/user/meta_inf.json
modules/database/index.js
modules/database/drivers/cassandra.js
modules/database/drivers/redis.js
package.json</code></pre></figure><p>The reason why the whole command is wrapped in <code class="highlighter-rouge">$()</code> is because we need to interpret that command and pass its output to our <code class="highlighter-rouge">subl</code> executable, which is actually a command line shortcut to open Sublime Text. The end result is that we get all the conflicted files open in tabs, in Sublime Text. We can now proceed to the conflict resolution part, which I will not detail here.<p>After resolving the conflicts in your editor and saving the edits you made, you will notice that if you issue the <code class="highlighter-rouge">svn st | grep "^C"</code> command, you’ll still see the files as being in a conflicted state. This is because SVN creates separate files for each side of the conflict and refers to them when it shows a file as conflicted, and they look like the output below:<figure class="highlight"><pre><code class="language-bash" data-lang="bash">C       modules/user/index.js
?       modules/user/index.js.merge-left.r10231
?       modules/user/index.js.merge-right.r10255
?       modules/user/index.js.working
C       modules/user/meta_inf.json
?       modules/user/meta_inf.json.merge-left.r10231
?       modules/user/meta_inf.json.merge-right.r10255
?       modules/user/meta_inf.json.working
<span class="o">[</span>...]</code></pre></figure><p>The next step would be to manually remove those files, and we’re going to rely on awk again, for this task. Remember how we used <code class="highlighter-rouge">print</code> to pipe only the filenames to Sublime Text? That’s exactly what we are going to do now, but we’ll add <code class="highlighter-rouge">.*</code> at the end of each file, as we only want to remove the <code class="highlighter-rouge">.merge* </code> and the <code class="highlighter-rouge">.working</code> files, and not our original source code, and we will pipe everything to <code class="highlighter-rouge">rm</code>.<p><code class="highlighter-rouge">&gt; rm -Rf $(svn st | grep "^C" | awk '{print $2".*"}')</code><p>And you’re done, you can now commit your changes!<blockquote><p>Image credits: <a href="https://flic.kr/p/6AMV1C">Owl</a> by <a href="https://www.flickr.com/photos/23975018@N04/">DIVA007</a></blockquote></main><footer class="article-footer"><section><h3>Spread the word</h3><span class='st_facebook_large' displayText='Facebook'></span> <span class='st_twitter_large' displayText='Tweet'></span> <span class='st_linkedin_large' displayText='LinkedIn'></span> <span class='st_email_large' displayText='Email'></span> <span class='st_reddit_large' displayText='Reddit'></span> <span class='st_googleplus_large' displayText='Google +'></span> <span class='st_pinterest_large' displayText='Pinterest'></span></section><div class="pagination" role="navigation"> <a href="/communicating-through-commit-messages/" title="Previous article: Short tip: viewing and resolving svn conflicts in the terminal" role="prev">&larr; Communicating through commit messages</a> <a href="/I-hate-full-stack/" title="Next article: Short tip: viewing and resolving svn conflicts in the terminal" role="next">I hate full stack! Period! &rarr;</a></div><div id="disqus_thread"></div><script> (function() { var d = document, s = d.createElement('script'); s.src = '//codesinz.disqus.com/embed.js'; s.setAttribute('data-timestamp', +new Date()); (d.head || d.body).appendChild(s); })(); </script> <noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a></noscript></footer></article><script> (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){ (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o), m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m) })(window,document,'script','//www.google-analytics.com/analytics.js','ga'); ga('create', 'UA-32468134-4', 'auto'); ga('require', 'displayfeatures'); ga('send', 'pageview'); </script> <script type="text/javascript"> var _dcq = _dcq || []; var _dcs = _dcs || {}; _dcs.account = '9282313'; (function() { var dc = document.createElement('script'); dc.type = 'text/javascript'; dc.async = true; dc.src = '//tag.getdrip.com/9282313.js'; var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(dc, s); })(); </script> <script type="text/javascript" src="/javascripts/prism.js"></script> <script type="text/javascript">var switchTo5x=true;</script> <script type="text/javascript" src="//ws.sharethis.com/button/buttons.js"></script> <script type="text/javascript">stLight.options({publisher: "92204b4b-884e-4a7f-9337-a39d86c8b368", doNotHash: true, doNotCopy: false, hashAddressBar: true, shorten: false});</script>
