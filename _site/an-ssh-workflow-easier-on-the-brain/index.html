<!DOCTYPE html>
<html lang="en" itemscope itemtype="https://schema.org/Blog">
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  
    <title>An SSH workflow that's easier on your brain</title>
  

  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="keywords" content="programming, tutorials, javascript, html, css, frontend, nodejs, react, angular">

  <meta name="author" itemprop="creator" content="">

  <meta property="og:locale" content="en_US" />

  <link type="application/atom+xml" rel="alternate" href="https://codesi.nz/feed.xml" title="codesins. - The blog of Adrian Oprea, freelance web developer." />

  
    <meta name="description" itemprop="description" content="In this quick tip, I will share my SSH workflow and how I manage things
when it comes to working with multiple remote machines.
Unlike “the old days” when we used to have Apache installed locally on our
machines — I see you Mamp Server users — now, with the rise of cloud
providers like Amazon, Digital Ocean or Microsoft Azure, and  products such as
Docker, we are working more and more on systems that are spread accross multiple
machines, instances, containers, you name it.

">

    <meta property="og:type" content="article" />
    <meta property="og:title" content="An SSH workflow that's easier on your brain" />
    <meta property="og:description" content="In this quick tip, I will share my SSH workflow and how I manage things
when it comes to working with multiple remote machines.
Unlike “the old days” when we used to have Apache installed locally on our
machines — I see you Mamp Server users — now, with the rise of cloud
providers like Amazon, Digital Ocean or Microsoft Azure, and  products such as
Docker, we are working more and more on systems that are spread accross multiple
machines, instances, containers, you name it.

" />
    <meta property="og:image" content="https://codesi.nz/images/posts/serializing-object-methods-using-es6-template-strings-and-eval/post.jpg" />
    <meta property="og:url" content="https://codesi.nz/an-ssh-workflow-easier-on-the-brain/" />
    <meta property="article:published_time" content="29 Feb 2016" />
    <meta property="article:modified_time" content="01 Mar 2016 " />
    <link rel="canonical" href="https://codesi.nz/an-ssh-workflow-easier-on-the-brain/">

    <!-- Twitter Card -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:url" content="https://codesi.nz/an-ssh-workflow-easier-on-the-brain/
    ">
    <meta name="twitter:title" content="An SSH workflow that's easier on your brain">
    <meta name="twitter:description" content="In this quick tip, I will share my SSH workflow and how I manage things
when it comes to working with multiple remote machines.
Unlike “the old days” when we used to have Apache installed locally on our
machines — I see you Mamp Server users — now, with the rise of cloud
providers like Amazon, Digital Ocean or Microsoft Azure, and  products such as
Docker, we are working more and more on systems that are spread accross multiple
machines, instances, containers, you name it.

">
    <meta name="twitter:image" content="https://codesi.nz/images/posts/serializing-object-methods-using-es6-template-strings-and-eval/post.jpg">


  
    <meta name="”twitter:creator”" value="">

  
    <link rel="author" href="https://plus.google.com/+AdrianOpreasWeb/">
    <link rel="publisher" href="https://plus.google.com/+AdrianOpreasWeb/">
  


  <!-- syntax highlighting CSS -->
  <link rel="stylesheet" href="/css/syntax.css">
  <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.4/styles/tomorrow.min.css">

  <!-- CSS -->
  <link rel="stylesheet" href="/css/reset.css">
  <link rel="stylesheet" href="/css/main.css">
  <link href="//netdna.bootstrapcdn.com/font-awesome/4.0.3/css/font-awesome.css" rel="stylesheet">

  <!-- Fonts -->
  <link href='//fonts.googleapis.com/css?family=Bitter:400,700,400italic|Open+Sans:400italic,600italic,400,600|Source+Code+Pro' rel='stylesheet' type='text/css'>
  <script>
    var host = "codesi.nz";
    if ((host == window.location.host) && (window.location.protocol != "https:")) {
      window.location.protocol = "https";
    }
  </script>
</head>
<body>
  <header style="background-image: url(/images/posts/serializing-object-methods-using-es6-template-strings-and-eval/post.jpg);">
  <div class="container post-container">
    <a href="/" class="home_button"></a>
    <div class="inner-container">
      <h1>An SSH workflow that's easier on your brain</h1>
      <ul class="meta">
        <li>
          <span>
            Author
          </span>
          <a class="post-author" href="https://twitter.com/@opreaadrian">Adrian Oprea</a>
        </li>
        <li>
          <span>
            Published
          </span>
          29 Feb 2016
        </li>
        <li>
          <span>
            Category
          </span>
          productivity
        </li>
      </ul>
    </div>
    <ul class="pagination">
      
        <li class="previous">
          <a href="/serializing-object-methods-with-ES6-template-strings-and-eval/">
            Previous
          </a>
        </li>
      
      
    </ul>
  </div>
</header>

<article itemscope itemtype="https://schema.org/BlogPosting">
<meta itemprop="datePublished" content="2016-02-29T14:30:00+02:00">
<meta itemprop="dateModified" content="2016-03-01T11:00:00+02:00">
<meta itemprop="keywords" content="hacks, tricks, workflow, tips, ssh, remote, servers">
  <section itemprop="articleBody" class="container">
    <p>In this quick tip, I will share my SSH workflow and how I manage things
when it comes to working with multiple remote machines.
Unlike “the old days” when we used to have Apache installed locally on our
machines — I see you Mamp Server users — now, with the rise of cloud
providers like Amazon, Digital Ocean or Microsoft Azure, and  products such as
Docker, we are working more and more on systems that are spread accross multiple
machines, instances, containers, you name it.</p>

<p>Part of my daily routine is working on certain machines that are usually
accessible via SSH and my biggest problem, currently, is remembering the ip
addresses of the machines I want to connect to, or at
least part of the ip addresses so I can do a quick reverse-i-search
(<code class="highlighter-rouge">CTRL+R</code> on any machine using bash, zsh).<br />
You’re probably thinking: “Maybe you should just use the <code class="highlighter-rouge">fish</code> shell and rely
on its awesome command completion functionality”, and you are right, but not
even the almighty <code class="highlighter-rouge">fish</code> shell save me, so I’ve developed a habit of using my
ssh config as much as possible.<br />
The normal way you would connect to a server through SSH would be to issue the
following command: <code class="highlighter-rouge">ssh user@192.168.1.1</code>, insert your password and you’re done.<br />
The approach above makes four false assumptions about me:</p>

<ol>
  <li>I know/remember the username(ok for 1-2 machines, not ok for 10-15)</li>
  <li>I know/remember the IP address</li>
  <li>I know/remember the password</li>
  <li>I am able to type my password correctly</li>
</ol>

<p>Honestly, I am able to remember everything I mentioned above,for 1-2 servers,
but I have to work with 5+ servers, and no two configurations
are the same. For this, I have a solution that is called <code class="highlighter-rouge">ssh_config</code>.
It usually resides on your machine, in your <code class="highlighter-rouge">$HOME/.ssh/</code> directory
(assuming you have <a href="http://www.openssh.com/">openssh</a> installed on your machine).
To check whether or not you already have the file available on your system, run
the first command from the gist below, and see if your output is similar to mine,
and if not, follow the instructions to create it.</p>

<noscript><pre># List all information about the config file, under the ssh/ directory
adrian@zen ~/D/blog&gt; ls -al ~/.ssh/config
-rw-r--r--  1 adrian  staff  210 Mar  1 13:59 /Users/adrian/.ssh/config

# If you get &quot;No such file or directory [...]&quot;, run the command below
adrian@zen ~/D/blog&gt; touch ~/.ssh/config

# Check again, to see if the file has been properly created
adrian@zen ~/D/blog&gt; ls -al ~/.ssh/config
-rw-r--r--  1 adrian  staff  0 Mar  1 17:12 /Users/adrian/.ssh/config</pre></noscript>
<script src="https://gist.github.com/opreaadrian/fe17eff7843f8b3dcaca.js?file=1.sh-session"> </script>

<p>Now that you’ve created the config file, let’s add stuff to it. A typical
configuration, would contain things like the alias you would like to give to
your server, your username on that machine, your preferred authentication
method, and by putting it all together, you get something similar to the snippet
below.</p>

<noscript><pre>Host remote-machine                       # The shorter name you will use with the ssh command
  HostName 192.168.33.10                  # The machine&#39;s IP address or hostname
  User adrian                             # Your username on the machine
  IdentityFile ~/.ssh/remote_machine.key  # If you don&#39;t want to type the password every time, get one of these
  RemoteForward 5858 5858                 # Port forwarding (for tunnelling) - I use it for NodeJS remote debug
  ForwardAgent yes                        # Forward the ssh key to machines that you connect to from the remote machine</pre></noscript>
<script src="https://gist.github.com/opreaadrian/fe17eff7843f8b3dcaca.js?file=2.sh-session"> </script>

<p>A short explanation for each line has been added for each line in the
configuration but in order to reap all the benefits that an <code class="highlighter-rouge">ssh</code> config file
has to offer, I encourage you to go through
<a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man5/ssh_config.5">the documentation for <code class="highlighter-rouge">ssh_config</code></a>,
or type <code class="highlighter-rouge">man ssh_config</code> in your preferred terminal emulator.</p>

<p>To get a better idea on how a full <code class="highlighter-rouge">ssh_config</code> file would look like, you can
take a look at the snippet below, that shows a multi-machine config with all
the bells and whistles.</p>

<noscript><pre># This is my git server
Host git
  HostName 192.168.33.10
  User adrian
  IdentityFile ~/.ssh/git_server.key

# I use this to connect to other machines on the same network
# hence, I&#39;m forwarding my connection to the authentication agent
Host manager
  HostName 192.168.38.1
  User root
  IdentityFile ~/.ssh/manager.key
  ForwardAgent yes

# Forwarding port 5858 to localhost for remote debugging  
Host nodejs
  HostName 192.168.33.11
  User adrian
  IdentityFile ~/.ssh/nodejs.key
  RemoteForward 5858 5858
  
Host db
  HostName 192.168.33.12
  User root
  IdentityFile ~/.ssh/db.key</pre></noscript>
<script src="https://gist.github.com/opreaadrian/fe17eff7843f8b3dcaca.js?file=3.sh-session"> </script>

<p>In order to connect to any of those machines, I just need to run <code class="highlighter-rouge">ssh &lt;Host&gt;</code>, so,
if I would like to connect to my <code class="highlighter-rouge">manager</code> instance, all I need to do is run
<code class="highlighter-rouge">ssh manager</code>. Would you prefer to <code class="highlighter-rouge">ssh root@192.168.38.1</code> and then having
to type your password, every time? Didn’t think so.<br />
I really hope you enjoyed this short article and that the knowledge you get from
it helps you spend less time on the mundane tasks and more on the creative side
of our jobs.</p>

<blockquote>
  <p>Photo credits:<br />
<a href="https://www.flickr.com/photos/sdelgado">Sergio Delgado</a> — <a href="https://en.wikipedia.org/wiki/Sloth">Three-toed sloth in the Dallas World Aquarium</a></p>
</blockquote>


  <section>
    <h3>Share this article:</h3>
    <span class='st_facebook_large' displayText='Facebook'></span>
    <span class='st_twitter_large' displayText='Tweet'></span>
    <span class='st_linkedin_large' displayText='LinkedIn'></span>
    <span class='st_email_large' displayText='Email'></span>
    <span class='st_reddit_large' displayText='Reddit'></span>
    <span class='st_googleplus_large' displayText='Google +'></span>
    <span class='st_pinterest_large' displayText='Pinterest'></span>
  </section>
      <div id="disqus_thread"></div>
      <script type="text/javascript">
          /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
          var disqus_shortname = 'codesinz'; // required: replace example with your forum shortname

          /* * * DON'T EDIT BELOW THIS LINE * * */
          (function() {
              var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
              dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
              (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
          })();
      </script>
      <noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
  </section>
</article>


  <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-32468134-4', 'auto');
  ga('require', 'displayfeatures');
  ga('send', 'pageview');

</script>
<script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.4/highlight.min.js"></script>
<script>
  hljs.initHighlightingOnLoad();
</script>
<script type="text/javascript">var switchTo5x=true;</script>
<script type="text/javascript" src="//ws.sharethis.com/button/buttons.js"></script>
<script type="text/javascript">stLight.options({publisher: "92204b4b-884e-4a7f-9337-a39d86c8b368", doNotHash: true, doNotCopy: false, hashAddressBar: true, shorten: false});</script>
</body>
</html>
