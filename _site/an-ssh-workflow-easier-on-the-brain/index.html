<!DOCTYPE html><html lang="en" itemscope itemtype="https://schema.org/Blog"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"><meta name="viewport" content="width=device-width, initial-scale=1"><title>An SSH workflow that's easier on your brain</title><meta name="keywords" content="hacks, tricks, workflow, tips, ssh, remote, servers"><meta name="author" itemprop="creator" content="Adrian Oprea"><meta name="description" itemprop="description" content="In this quick tip, I will share my SSH workflow and how I manage things when it comes to working with multiple remote machines. Unlike “the old days” when we used to have Apache installed locally on our machines — I see you Mamp Server users — now, with the rise of cloud providers like Amazon, Digital Ocean or Microsoft Azure, and products such as Docker, we are working more and more on systems that are spread accross multiple machines, instances, containers, you name it. "><meta property="og:type" content="article" /><meta property="og:title" content="An SSH workflow that's easier on your brain" /><meta property="og:description" content="In this quick tip, I will share my SSH workflow and how I manage things when it comes to working with multiple remote machines. Unlike “the old days” when we used to have Apache installed locally on our machines — I see you Mamp Server users — now, with the rise of cloud providers like Amazon, Digital Ocean or Microsoft Azure, and products such as Docker, we are working more and more on systems that are spread accross multiple machines, instances, containers, you name it. " /><meta property="og:image" content="https://codesi.nz/images/posts/ssh-workflow-easier-on-the-brain/post.jpg" /><meta property="og:url" content="https://codesi.nz/an-ssh-workflow-easier-on-the-brain/" /><meta property="og:locale" content="en_US" /><meta property="article:published_time" content="2016-05-05T14:30:00+02:00" /><meta property="article:modified_time" content="2016-05-05T11:00:00+02:00 " /><link rel="canonical" href="https://codesi.nz/an-ssh-workflow-easier-on-the-brain/"><meta name="”twitter:creator”" value=""><meta name="twitter:card" content="summary_large_image"><meta name="twitter:url" content="https://codesi.nz/an-ssh-workflow-easier-on-the-brain/"><meta name="twitter:title" content="An SSH workflow that's easier on your brain"><meta name="twitter:description" content="In this quick tip, I will share my SSH workflow and how I manage things when it comes to working with multiple remote machines. Unlike “the old days” when we used to have Apache installed locally on our machines — I see you Mamp Server users — now, with the rise of cloud providers like Amazon, Digital Ocean or Microsoft Azure, and products such as Docker, we are working more and more on systems that are spread accross multiple machines, instances, containers, you name it. "><meta name="twitter:image" content="https://codesi.nz/images/posts/ssh-workflow-easier-on-the-brain/post.jpg"><link type="application/atom+xml" rel="alternate" href="/feed.xml" title="codesins. - The blog of Adrian Oprea, freelance web developer."><link rel="author" href="https://plus.google.com/+AdrianOpreasWeb/"><link rel="publisher" href="https://plus.google.com/+AdrianOpreasWeb/"><link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/normalize/4.0.0/normalize.min.css"><link href='https://fonts.googleapis.com/css?family=Open+Sans:400,300,300italic,700,400italic,600,600italic,700italic,800,800italic' rel='stylesheet' type='text/css'><link href='https://fonts.googleapis.com/css?family=Lato:100,300,900' rel='stylesheet' type='text/css'><link rel="stylesheet" href="/stylesheets/screen.css"><link rel="stylesheet" href="/stylesheets/monokai.css"> <script> var host = "codesi.nz"; if ((host == window.location.host) && (window.location.protocol != "https:")) { window.location.protocol = "https"; } </script><body><div class="header"><div role="branding" class="branding"><h1><a href="/" title="Go back to the homepage">codesins.</a></h1></div><div class="navigation"><nav role="navigation"><ul><li class="active" ><a title="Navigate to the blog" href="/">Blog</a><li ><a title="Find out more about me" href="/about/">Who am I</a><li ><a title="Go to the contact page" href="/contact/">Let's chat</a></ul></nav></div></div><article class="article-full" itemprop="blogPosts" itemscope itemtype="https://schema.org/BlogPosting"><meta itemprop="datePublished" content="2016-05-05T14:30:00+02:00"><meta itemprop="dateModified" content="2016-05-05T11:00:00+02:00"><meta itemprop="keywords" content="hacks, tricks, workflow, tips, ssh, remote, servers"><meta itemprop="author" content="Adrian Oprea"><meta itemprop="inLanguage" content="en_US"> <span itemprop="audience" itemscope itemtype="http://schema.org/PeopleAudience"><meta itemprop="gender" content="any"> </span><header class="article-header"><h1 class="article-header__heading article-header__heading--center article-header__heading--white" itemprop="headline">An SSH workflow that's easier on your brain</h1><div class="article-info article-info--delimited"><div class="article-info-inner"> <a class="article-info__author-profile" href="/about" title="About the author: Adrian Oprea"> <img class="article-info__author-image" src="/images/assets/adrian_oprea.png" alt="Author image: Adrian Oprea"> </a><p> Adrian Oprea on <time itemProp="datePublished" datetime="2016-05-05T14:30:00+02:00">05 May 2016</time><br> Published in <span class="categories-list"> <span class="categories-list-item">productivity</span> </span></div></div></header><main class="article-body" itemprop="articleBody"><p>In this quick tip, I will share my SSH workflow and how I manage things when it comes to working with multiple remote machines. Unlike “the old days” when we used to have Apache installed locally on our machines — I see you Mamp Server users — now, with the rise of cloud providers like Amazon, Digital Ocean or Microsoft Azure, and products such as Docker, we are working more and more on systems that are spread accross multiple machines, instances, containers, you name it.<p>Part of my daily routine is working on certain machines that are usually accessible via SSH and my biggest problem, currently, is remembering the ip addresses of the machines I want to connect to, or at least part of the ip addresses so I can do a quick reverse-i-search (<code class="highlighter-rouge">CTRL+R</code> on any machine using bash, zsh).<br /> You’re probably thinking: “Maybe you should just use the <code class="highlighter-rouge">fish</code> shell and rely on its awesome command completion functionality”, and you are right, but not even the almighty <code class="highlighter-rouge">fish</code> shell can save me, so I’ve developed a habit of using my ssh config as much as possible.<br /> The normal way you would connect to a server through SSH would be to issue the following command: <code class="highlighter-rouge">ssh user@192.168.1.1</code>, insert your password and you’re done.<p>The approach above makes four false assumptions about me:<ol><li>I know/remember the username(ok for 1-2 machines, not ok for 10-15)<li>I know/remember the IP address<li>I know/remember the password<li>I am able to type my password correctly</ol><p>Honestly, I am able to remember everything I mentioned above,for 1-2 servers, but I have to work with 5+ servers, and no two configurations are the same. For this, I have a solution that is called <code class="highlighter-rouge">ssh_config</code>. It usually resides on your machine, in your <code class="highlighter-rouge">$HOME/.ssh/</code> directory (assuming you have <a href="http://www.openssh.com/">openssh</a> installed on your machine). To check whether or not you already have the file available on your system, run the first command from the snippet below, and see if your output is similar to mine, and if not, follow the instructions to create it.<div class="highlighter-rouge"><pre class="highlight"><code><span class="c"># List all information about the config file, under the ssh/ directory</span>
adrian@zen ~/D/blog&gt; ls -al ~/.ssh/config
-rw-r--r--  1 adrian  staff  210 Mar  1 13:59 /Users/adrian/.ssh/config

<span class="c"># If you get "No such file or directory [...]", run the command below</span>
adrian@zen ~/D/blog&gt; touch ~/.ssh/config

<span class="c"># Check again, to see if the file has been properly created</span>
adrian@zen ~/D/blog&gt; ls -al ~/.ssh/config
-rw-r--r--  1 adrian  staff  0 Mar  1 17:12 /Users/adrian/.ssh/config
</code></pre></div><p>Now that you’ve created the config file, let’s add stuff to it. A typical configuration, would contain things like the alias you would like to give to your server, your username on that machine, your preferred authentication method, and by putting it all together, you get something similar to the snippet below.<div class="highlighter-rouge"><pre class="highlight"><code>Host remote-machine                       <span class="c"># The shorter name you will use with the ssh command</span>
  HostName 192.168.33.10                  <span class="c"># The machine's IP address or hostname</span>
  User adrian                             <span class="c"># Your username on the machine</span>
  IdentityFile ~/.ssh/remote_machine.key  <span class="c"># If you don't want to type the password every time, get one of these</span>
  RemoteForward 5858 5858                 <span class="c"># Port forwarding (for tunnelling) - I use it for NodeJS remote debug</span>
  ForwardAgent yes                        <span class="c"># Forward the ssh key to machines that you connect to from the remote machine</span>
</code></pre></div><p>A short explanation for each line has been added for each line in the configuration but in order to reap all the benefits that an <code class="highlighter-rouge">ssh</code> config file has to offer, I encourage you to go through <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man5/ssh_config.5">the documentation for <code class="highlighter-rouge">ssh_config</code></a>, or type <code class="highlighter-rouge">man ssh_config</code> in your preferred terminal emulator.<p>To get a better idea on how a full <code class="highlighter-rouge">ssh_config</code> file would look like, you can take a look at the snippet below, that shows a multi-machine config with all the bells and whistles.<div class="highlighter-rouge"><pre class="highlight"><code><span class="c"># This is my git server</span>
Host git
  HostName 192.168.33.10
  User adrian
  IdentityFile ~/.ssh/git_server.key

<span class="c"># I use this to connect to other machines on the same network</span>
<span class="c"># hence, I'm forwarding my connection to the authentication agent</span>
Host manager
  HostName 192.168.38.1
  User root
  IdentityFile ~/.ssh/manager.key
  ForwardAgent yes

<span class="c"># Forwarding port 5858 to localhost for remote debugging  </span>
Host nodejs
  HostName 192.168.33.11
  User adrian
  IdentityFile ~/.ssh/nodejs.key
  RemoteForward 5858 5858
  
Host db
  HostName 192.168.33.12
  User root
  IdentityFile ~/.ssh/db.key
</code></pre></div><p>In order to connect to any of those machines, I just need to run <code class="highlighter-rouge">ssh &lt;Host&gt;</code>, so, if I would like to connect to my <code class="highlighter-rouge">manager</code> instance, all I need to do is run <code class="highlighter-rouge">ssh manager</code>. Would you prefer to <code class="highlighter-rouge">ssh root@192.168.38.1</code> and then having to type your password, every time? Didn’t think so.<br /> I really hope you enjoyed this short article and that the knowledge you get from it helps you spend less time on the mundane tasks and more on the creative side of our jobs.<blockquote><p>Photo credits:<br /> <a href="https://www.flickr.com/photos/sdelgado">BMiz</a> — <a href="https://flic.kr/p/fNBLwz">Productivity - this is working from home…</a></blockquote></main><footer class="article-footer"><section><h3>Spread the word</h3><span class='st_facebook_large' displayText='Facebook'></span> <span class='st_twitter_large' displayText='Tweet'></span> <span class='st_linkedin_large' displayText='LinkedIn'></span> <span class='st_email_large' displayText='Email'></span> <span class='st_reddit_large' displayText='Reddit'></span> <span class='st_googleplus_large' displayText='Google +'></span> <span class='st_pinterest_large' displayText='Pinterest'></span></section><div class="pagination" role="navigation"> <a href="/serializing-object-methods-with-ES6-template-strings-and-eval/" title="Previous article: An SSH workflow that's easier on your brain" role="prev">&larr; Serializing object methods using ES6 template strings and...</a> <a href="/es6-arrow-functions-in-depth/" title="Next article: An SSH workflow that's easier on your brain" role="next">ES6 arrow functions in depth &rarr;</a></div><div id="disqus_thread"></div><script> (function() { var d = document, s = d.createElement('script'); s.src = '//codesinz.disqus.com/embed.js'; s.setAttribute('data-timestamp', +new Date()); (d.head || d.body).appendChild(s); })(); </script> <noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a></noscript></footer></article><script> (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){ (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o), m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m) })(window,document,'script','//www.google-analytics.com/analytics.js','ga'); ga('create', 'UA-32468134-4', 'auto'); ga('require', 'displayfeatures'); ga('send', 'pageview'); </script> <script type="text/javascript"> var _dcq = _dcq || []; var _dcs = _dcs || {}; _dcs.account = '9282313'; (function() { var dc = document.createElement('script'); dc.type = 'text/javascript'; dc.async = true; dc.src = '//tag.getdrip.com/9282313.js'; var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(dc, s); })(); </script> <script type="text/javascript">var switchTo5x=true;</script> <script type="text/javascript" src="//ws.sharethis.com/button/buttons.js"></script> <script type="text/javascript">stLight.options({publisher: "92204b4b-884e-4a7f-9337-a39d86c8b368", doNotHash: true, doNotCopy: false, hashAddressBar: true, shorten: false});</script>
