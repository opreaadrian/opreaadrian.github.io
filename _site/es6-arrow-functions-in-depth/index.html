<!DOCTYPE html><html lang="en" itemscope itemtype="https://schema.org/Blog"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"><meta name="viewport" content="width=device-width, initial-scale=1"><title>ES6 arrow functions in depth</title><meta name="keywords" content="JavaScript, ES6, ECMAScript6, arrows, functions, lambdas, anonymous functions"><meta name="author" itemprop="creator" content="Adrian Oprea"><meta name="description" itemprop="description" content="One of the prettiest features of ES6, it could easily win a beauty contest, if such a contest would be held. What many people don’t know is that the arrow function is not simply a form of syntactic sugar that we can use instead of the regular callback. As I like to explain it to the people who attend my trainings/workshops, arrow functions are this-less, arguments-less, new.target-less and super-less. Let us now get past the shorter syntax and dive deeper into the specifics of the arrow function. "><meta property="og:type" content="article" /><meta property="og:title" content="ES6 arrow functions in depth" /><meta property="og:description" content="One of the prettiest features of ES6, it could easily win a beauty contest, if such a contest would be held. What many people don’t know is that the arrow function is not simply a form of syntactic sugar that we can use instead of the regular callback. As I like to explain it to the people who attend my trainings/workshops, arrow functions are this-less, arguments-less, new.target-less and super-less. Let us now get past the shorter syntax and dive deeper into the specifics of the arrow function. " /><meta property="og:image" content="https://codesi.nz/images/posts/es6-arrow-functions-in-depth/post.jpg" /><meta property="og:url" content="https://codesi.nz/es6-arrow-functions-in-depth/" /><meta property="og:locale" content="en_US" /><meta property="article:published_time" content="2016-05-19T16:40:00+03:00" /><meta property="article:modified_time" content="2016-05-19T16:40:00+03:00 " /><link rel="canonical" href="https://codesi.nz/es6-arrow-functions-in-depth/"><meta name="”twitter:creator”" value=""><meta name="twitter:card" content="summary_large_image"><meta name="twitter:url" content="https://codesi.nz/es6-arrow-functions-in-depth/"><meta name="twitter:title" content="ES6 arrow functions in depth"><meta name="twitter:description" content="One of the prettiest features of ES6, it could easily win a beauty contest, if such a contest would be held. What many people don’t know is that the arrow function is not simply a form of syntactic sugar that we can use instead of the regular callback. As I like to explain it to the people who attend my trainings/workshops, arrow functions are this-less, arguments-less, new.target-less and super-less. Let us now get past the shorter syntax and dive deeper into the specifics of the arrow function. "><meta name="twitter:image" content="https://codesi.nz/images/posts/es6-arrow-functions-in-depth/post.jpg"><link type="application/atom+xml" rel="alternate" href="/feed.xml" title="codesins. - The blog of Adrian Oprea, freelance web developer."><link rel="author" href="https://plus.google.com/+AdrianOpreasWeb/"><link rel="publisher" href="https://plus.google.com/+AdrianOpreasWeb/"><link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/normalize/4.0.0/normalize.min.css"><link href='https://fonts.googleapis.com/css?family=Open+Sans:400,300,300italic,700,400italic,600,600italic,700italic,800,800italic' rel='stylesheet' type='text/css'><link href='https://fonts.googleapis.com/css?family=Lato:100,300,900' rel='stylesheet' type='text/css'><link rel="stylesheet" href="/stylesheets/screen.css"> <script> var host = "codesi.nz"; if ((host == window.location.host) && (window.location.protocol != "https:")) { window.location.protocol = "https"; } </script><body><div class="header"><div role="branding" class="branding"><h1><a href="/" title="Go back to the homepage">codesins.</a></h1></div><div class="navigation"><nav role="navigation"><ul><li class="active" ><a title="Navigate to the blog" href="/">Blog</a><li ><a title="Find out more about me" href="/about/">Who am I</a><li ><a title="Go to the contact page" href="/contact/">Let's chat</a></ul></nav></div></div><article class="article-full" itemprop="blogPosts" itemscope itemtype="https://schema.org/BlogPosting"><meta itemprop="datePublished" content="2016-05-19T16:40:00+03:00"><meta itemprop="dateModified" content="2016-05-19T16:40:00+03:00"><meta itemprop="keywords" content="JavaScript, ES6, ECMAScript6, arrows, functions, lambdas, anonymous functions"><meta itemprop="author" content="Adrian Oprea"><meta itemprop="inLanguage" content="en_US"> <span itemprop="audience" itemscope itemtype="http://schema.org/PeopleAudience"><meta itemprop="gender" content="any"> </span><header class="article-header"><h1 class="article-header__heading article-header__heading--center article-header__heading--white" itemprop="headline">ES6 arrow functions in depth</h1><div class="article-info article-info--delimited"><div class="article-info-inner"> <a class="article-info__author-profile" href="/about" title="About the author: Adrian Oprea"> <img class="article-info__author-image" src="/images/assets/adrian_oprea.png" alt="Author image: Adrian Oprea"> </a><p> Adrian Oprea on <time itemProp="datePublished" datetime="2016-05-19T16:40:00+03:00">19 May 2016</time><br> Published in <span class="categories-list"> <span class="categories-list-item">javascript</span> </span></div></div></header><main class="article-body" itemprop="articleBody"><p>One of the prettiest features of ES6, it could easily win a beauty contest, if such a contest would be held. What many people don’t know is that the arrow function is not simply a form of syntactic sugar that we can use instead of the regular callback. As I like to explain it to the people who attend my trainings/workshops, arrow functions are <code class="highlighter-rouge">this</code>-less, <code class="highlighter-rouge">arguments</code>-less, <code class="highlighter-rouge">new.target</code>-less and <code class="highlighter-rouge">super</code>-less. Let us now get past the shorter syntax and dive deeper into the specifics of the arrow function.<h2 class="no_toc" id="table-of-contents">Table of contents</h2><ul id="markdown-toc"><li><a href="#lexical-bound-this" id="markdown-toc-lexical-bound-this">Lexical-bound this</a><li><a href="#lexical-arguments" id="markdown-toc-lexical-arguments">Lexical arguments</a><li><a href="#other-characteristics" id="markdown-toc-other-characteristics">Other characteristics</a><li><a href="#closing-thoughts" id="markdown-toc-closing-thoughts">Closing thoughts</a></ul><h2 id="lexical-bound-this">Lexical-bound this</h2><p>Previously, regular functions would have their <code class="highlighter-rouge">this</code> value set to the global object if they were used as callbacks, to a new object in case they were called with the <code class="highlighter-rouge">new</code> operator or, in the case of libraries like jQuery, they would be set to the object that triggered an event in case of event handlers, or the current element in a <code class="highlighter-rouge">$.each</code> iteration.This situation proved very confusing even for experienced developers. Let’s say you have a piece of code like the one below.<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kd">var</span> <span class="nx">obj</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">nameValue</span><span class="p">:</span> <span class="s1">'default'</span><span class="p">,</span>
  <span class="na">initializeHandlers</span><span class="p">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">nameInput</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">querySelector</span><span class="p">(</span><span class="s1">'#name'</span><span class="p">);</span>

    <span class="nx">nameInput</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="s1">'blur'</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">event</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">nameValue</span> <span class="o">=</span> <span class="nx">event</span><span class="p">.</span><span class="nx">target</span><span class="p">.</span><span class="nx">value</span><span class="p">;</span>
    <span class="p">});</span>
  <span class="p">}</span>
<span class="p">};</span>

<span class="nx">obj</span><span class="p">.</span><span class="nx">initializeHandlers</span><span class="p">();</span></code></pre></figure><p>The problem is that <code class="highlighter-rouge">this</code> inside the <code class="highlighter-rouge">blur</code> event handler is set to the global object rather than obj. In strict mode — <code class="highlighter-rouge">‘use strict’;</code> — you risk breaking your application because <code class="highlighter-rouge">this</code> is set to <code class="highlighter-rouge">undefined</code>. In order to side-step this issue we have two options:<ul><li>Convert the event handler to a function bound to the outer scope, using <a href="https://developer.mozilla.org/en-US/docs/Web"><code class="highlighter-rouge">Function.prototype.bind</code></a><li>Use the dirty <code class="highlighter-rouge">var self = this;</code> expression in the <code class="highlighter-rouge">initializeHandlers</code> function (I see this as a hack)</ul><p>Both options are illustrated below.<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="p">[...]</span>
<span class="nl">initializeHandlers</span><span class="p">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
  <span class="kd">var</span> <span class="nx">nameInput</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">querySelector</span><span class="p">(</span><span class="s1">'#name'</span><span class="p">);</span>
  <span class="c1">// more elegant but we can do better</span>
  <span class="kd">var</span> <span class="nx">blurHandler</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">event</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">nameValue</span> <span class="o">=</span> <span class="nx">event</span><span class="p">.</span><span class="nx">target</span><span class="p">.</span><span class="nx">value</span><span class="p">;</span>
  <span class="p">}.</span><span class="nx">bind</span><span class="p">(</span><span class="k">this</span><span class="p">)</span>

  <span class="nx">nameInput</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="s1">'blur'</span><span class="p">,</span> <span class="nx">blurHandler</span><span class="p">);</span>
<span class="p">}</span>
<span class="p">[...]</span></code></pre></figure><figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="p">[...]</span>
<span class="nl">initializeHandlers</span><span class="p">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
  <span class="kd">var</span> <span class="nx">nameInput</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">querySelector</span><span class="p">(</span><span class="s1">'#name'</span><span class="p">);</span>
  <span class="c1">// ugly and error-prone</span>
  <span class="kd">var</span> <span class="nx">self</span> <span class="o">=</span> <span class="k">this</span><span class="p">;</span>

  <span class="nx">nameInput</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="s1">'blur'</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">event</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">self</span><span class="p">.</span><span class="nx">nameValue</span> <span class="o">=</span> <span class="nx">event</span><span class="p">.</span><span class="nx">target</span><span class="p">.</span><span class="nx">value</span><span class="p">;</span>
  <span class="p">});</span>
<span class="p">}</span>
<span class="p">[...]</span></code></pre></figure><p>On the other hand, arrow functions have no internal context. They inherit their context from the outer scope. Let’s take a look at how arrow functions solve this problem.<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kr">const</span> <span class="nx">obj</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">nameValue</span><span class="p">:</span> <span class="s1">'default'</span><span class="p">,</span>
  <span class="na">initializeHandlers</span><span class="p">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="kr">const</span> <span class="nx">nameInput</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">querySelector</span><span class="p">(</span><span class="s1">'#name'</span><span class="p">);</span>

    <span class="nx">nameInput</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="s1">'blur'</span><span class="p">,</span> <span class="p">(</span><span class="nx">event</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
      <span class="c1">// this references obj instead of the global object</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">nameValue</span> <span class="o">=</span> <span class="nx">event</span><span class="p">.</span><span class="nx">target</span><span class="p">.</span><span class="nx">value</span><span class="p">;</span>
    <span class="p">});</span>
  <span class="p">}</span>
<span class="p">};</span></code></pre></figure><p>In our new implementation <code class="highlighter-rouge">this</code> is a hard reference to the <code class="highlighter-rouge">obj</code> object and doesn’t get lost due to nesting.<h2 id="lexical-arguments">Lexical arguments</h2><p>Have you ever tried to access the <code class="highlighter-rouge">arguments</code> object inside an arrow function? I have, and I wasted 3 solid hours trying to figure out why do I get the arguments of the outer function instead of those of the arrow functions. Thankfully, MDN exists, and as good practice dictates, you check the documentation at the end, when you sit in a corner, knees tucked to your chest, rocking and repeating to yourself: “I should have been a carpenter!” Fun aside, arrow functions do not expose an <code class="highlighter-rouge">arguments</code> object. If you try to access it, you will get the arguments of the surrounding function. In our case, given the fact that the outer function is an arrow function as well, and we have no more functions further up the chain, we will get a <code class="highlighter-rouge">ReferenceError</code>.<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kr">const</span> <span class="nx">variadicAdder</span> <span class="o">=</span> <span class="p">(</span><span class="nx">x</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>

  <span class="k">return</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="kd">let</span> <span class="nx">args</span> <span class="o">=</span> <span class="nb">Array</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">slice</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">arguments</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
    <span class="k">return</span> <span class="nx">args</span><span class="p">.</span><span class="nx">reduce</span><span class="p">((</span><span class="nx">accumulator</span><span class="p">,</span> <span class="nx">current</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
      <span class="k">return</span> <span class="nx">accumulator</span> <span class="o">+</span> <span class="nx">current</span><span class="p">;</span>
    <span class="p">},</span> <span class="nx">x</span><span class="p">);</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="kr">const</span> <span class="nx">variadicAdderOf5</span> <span class="o">=</span> <span class="nx">variadicAdder</span><span class="p">(</span><span class="mi">5</span><span class="p">);</span>

<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">variadicAdderOf5</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">11</span><span class="p">,</span> <span class="mi">12</span><span class="p">));</span>
<span class="c1">// ReferenceError: arguments is not defined</span></code></pre></figure><p>There is no fix here, as there is nothing broken. What we can do is to return a plain function, rather than an arrow, from our <code class="highlighter-rouge">variadicAdder()</code>. This will give us the opportunity to access the <code class="highlighter-rouge">arguments</code> object without an issue. The updated code will look like the one below with the only difference that it will actually work and not throw an error.<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kr">const</span> <span class="nx">variadicAdder</span> <span class="o">=</span> <span class="p">(</span><span class="nx">x</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>

  <span class="k">return</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="kd">let</span> <span class="nx">args</span> <span class="o">=</span> <span class="nb">Array</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">slice</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">arguments</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
    <span class="k">return</span> <span class="nx">args</span><span class="p">.</span><span class="nx">reduce</span><span class="p">((</span><span class="nx">accumulator</span><span class="p">,</span> <span class="nx">current</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
      <span class="k">return</span> <span class="nx">accumulator</span> <span class="o">+</span> <span class="nx">current</span><span class="p">;</span>
    <span class="p">},</span> <span class="nx">x</span><span class="p">);</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="kr">const</span> <span class="nx">variadicAdderOf5</span> <span class="o">=</span> <span class="nx">variadicAdder</span><span class="p">(</span><span class="mi">5</span><span class="p">);</span>

<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">variadicAdderOf5</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">11</span><span class="p">,</span> <span class="mi">12</span><span class="p">));</span>
<span class="c1">// 38</span></code></pre></figure><p>To find out more about <code class="highlighter-rouge">Array.prototype.reduce</code>, head to the <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/Reduce">Mozilla Developer Network</a>.<h2 id="other-characteristics">Other characteristics</h2><p>As I mentioned in the introductory section of this article, arrow functions have several more characteristics besides the context and the arguments. The first thing I would like to mention is that you are unable to use the <code class="highlighter-rouge">new</code> operator with arrow functions. As a direct implication, arrow functions also don’t have <code class="highlighter-rouge">super()</code>. Snippets like the one below would simply throw a <code class="highlighter-rouge">TypeError</code>.<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kr">const</span> <span class="nx">Person</span> <span class="o">=</span> <span class="p">(</span><span class="nx">name</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="k">this</span><span class="p">.</span><span class="nx">name</span> <span class="o">=</span> <span class="nx">name</span><span class="p">;</span>
<span class="p">};</span>

<span class="kd">let</span> <span class="nx">p</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Person</span><span class="p">(</span><span class="s1">'John'</span><span class="p">);</span>
<span class="c1">// TypeError: Person is not a constructor</span></code></pre></figure><p>The third characteristic, which is as well, a direct implication of the inability to use the <code class="highlighter-rouge">new</code> operator, is the fact that arrow functions don’t have <code class="highlighter-rouge">new.target</code>. In a nutshell, <code class="highlighter-rouge">new.target</code> allows you to detect whether or not a function has been called as a constructor. Arrow functions, inherit <code class="highlighter-rouge">new.target</code> from their surrounding scope. If the outer scope is a function, and it is called like a constructor (e.g. <code class="highlighter-rouge">new Person('Adrian');</code>), then <code class="highlighter-rouge">new.target</code> will point to the outer function. The Mozilla Developer Network hosts a detailed explanation on <code class="highlighter-rouge">new.target</code> and I encourage you to check it out.<h2 id="closing-thoughts">Closing thoughts</h2><p>Now that you got a bit more detail into how arrow functions work, go and use them like they were intended! I can’t help recommending that you go through the <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference">Mozilla Developer Network JavaScript Reference</a> as there is an abundance of knowledge that will help you in the long run, in your web development career. Feel free to leave comments, suggest edits and especially share with your peers.<p>Cheers!<blockquote><p>Photo credits: <a href="https://www.flickr.com/photos/elzey/">Richard Elzey</a> — <a href="https://flic.kr/p/9ZDxat">Arrow Signs</a></blockquote></main><footer class="article-footer"><section><h3>Spread the word</h3><span class='st_facebook_large' displayText='Facebook'></span> <span class='st_twitter_large' displayText='Tweet'></span> <span class='st_linkedin_large' displayText='LinkedIn'></span> <span class='st_email_large' displayText='Email'></span> <span class='st_reddit_large' displayText='Reddit'></span> <span class='st_googleplus_large' displayText='Google +'></span> <span class='st_pinterest_large' displayText='Pinterest'></span></section><div class="pagination" role="navigation"> <a href="/an-ssh-workflow-easier-on-the-brain/" title="Previous article: ES6 arrow functions in depth" role="prev">&larr; An SSH workflow that's easier on your brain</a> <a href="/configuring-git-multiple-identities/" title="Next article: ES6 arrow functions in depth" role="next">Configuring Git - multiple identities &rarr;</a></div><div id="disqus_thread"></div><script> (function() { var d = document, s = d.createElement('script'); s.src = '//codesinz.disqus.com/embed.js'; s.setAttribute('data-timestamp', +new Date()); (d.head || d.body).appendChild(s); })(); </script> <noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a></noscript></footer></article><script> (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){ (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o), m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m) })(window,document,'script','//www.google-analytics.com/analytics.js','ga'); ga('create', 'UA-32468134-4', 'auto'); ga('require', 'displayfeatures'); ga('send', 'pageview'); </script> <script type="text/javascript"> var _dcq = _dcq || []; var _dcs = _dcs || {}; _dcs.account = '9282313'; (function() { var dc = document.createElement('script'); dc.type = 'text/javascript'; dc.async = true; dc.src = '//tag.getdrip.com/9282313.js'; var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(dc, s); })(); </script> <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.4/highlight.min.js"></script> <script> hljs.initHighlightingOnLoad(); </script> <script type="text/javascript">var switchTo5x=true;</script> <script type="text/javascript" src="//ws.sharethis.com/button/buttons.js"></script> <script type="text/javascript">stLight.options({publisher: "92204b4b-884e-4a7f-9337-a39d86c8b368", doNotHash: true, doNotCopy: false, hashAddressBar: true, shorten: false});</script>
